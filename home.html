<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Suburban Moxie | 18+</title>
  <!-- Plausible Analytics -->
<script>
  (function(){
    const PARAM_KEYS = ['utm_source','utm_medium','utm_campaign','utm_term','utm_content','gclid','fbclid','ttclid'];
    const STORAGE_KEY = 'utm_cache_v1';
    const DAYS_TO_KEEP = 30;

    function now(){ return Date.now(); }
    function days(ms){ return ms / (1000*60*60*24); }

    function readCache(){
      try { return JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}'); } catch(_){ return {}; }
    }
    function writeCache(obj){
      try { localStorage.setItem(STORAGE_KEY, JSON.stringify(obj)); } catch(_){}
    }
    function getParamsFromUrl(){
      const p = new URLSearchParams(location.search);
      const out = {};
      PARAM_KEYS.forEach(k => { if (p.get(k)) out[k] = p.get(k); });
      return out;
    }
    function inferDefaults(){
      // sensible defaults when nothing supplied
      return {
        utm_source: 'direct',
        utm_medium: 'site',
        utm_campaign: 'default'
      };
    }
    function resolveParams(){
      const cache = readCache();
      const incoming = getParamsFromUrl();
      let use = {};

      if (Object.keys(incoming).length) {
        use = { ...cache.params, ...incoming };
        writeCache({ params: use, ts: now() });
      } else if (cache.params && cache.ts && days(now() - cache.ts) <= DAYS_TO_KEEP) {
        use = cache.params;
      } else {
        use = inferDefaults();
      }
      // Always ensure the big 3 exist
      use.utm_source  = use.utm_source  || 'direct';
      use.utm_medium  = use.utm_medium  || 'site';
      use.utm_campaign= use.utm_campaign|| 'default';
      return use;
    }

    function withParams(url, params){
      const u = new URL(url, location.origin);
      PARAM_KEYS.forEach(k => {
        if (!u.searchParams.get(k) && params[k]) u.searchParams.set(k, params[k]);
      });
      return u.toString();
    }

    let pendingHref = null;

    document.addEventListener('DOMContentLoaded', () => {
      const params = resolveParams();

      // Outbound buttons with UTM propagation + consent modal
      document.querySelectorAll('a[data-propagate="true"]').forEach(a => {
        a.href = withParams(a.href, params);

        const track = (label) => {
          if (window.plausible) {
            plausible('Outbound Link', { props: {
              name: a.dataset.name || 'Link',
              label: label || 'click',
              href: a.href,
              utm_source: params.utm_source,
              utm_medium: params.utm_medium,
              utm_campaign: params.utm_campaign
            }});
          }
        };

        if (a.dataset.confirm === 'true') {
          a.addEventListener('click', (e) => {
            if (e.metaKey || e.ctrlKey || e.button === 1) return; // allow new-tab
            e.preventDefault();
            pendingHref = a.href;
            showModal();
            track('prompt');
          });
        } else {
          a.addEventListener('click', () => track('direct'));
        }

        // Safety rel attributes
        a.setAttribute('rel','nofollow noopener external');
      });

      // Modal controls
      const goBtn = document.getElementById('confirm-go');
      const cancelBtn = document.getElementById('confirm-cancel');
      const backdrop = document.getElementById('modal-backdrop');

      if (goBtn) goBtn.addEventListener('click', () => {
        if (pendingHref) {
          if (window.plausible) plausible('Outbound Link', { props: { name: 'Confirmed', href: pendingHref }});
          location.href = pendingHref;
          pendingHref = null;
        }
        hideModal();
      });
      if (cancelBtn) cancelBtn.addEventListener('click', () => { pendingHref = null; hideModal(); });
      if (backdrop) backdrop.addEventListener('click', (e) => { if (e.target.id === 'modal-backdrop'){ pendingHref = null; hideModal(); }});
      document.addEventListener('keydown', (e) => { if (e.key === 'Escape'){ pendingHref = null; hideModal(); }});
    });

    function showModal(){ document.getElementById('modal-backdrop').style.display='flex'; }
    function hideModal(){ document.getElementById('modal-backdrop').style.display='none'; }
    window.showModal = showModal; window.hideModal = hideModal;
  })();
</script>
</head>
<body>
  <div class="wrap">

    <!-- Profile block -->
    <div class="card">
      <img src="../images/avatar.jpg" alt="Profile Picture" class="profile-pic" />
      <h1>Suburban Moxie</h1>
      <p class="sub">Exclusive 18+ Content & Live Streams</p>
    </div>

    <!-- Tier 1 -->
    <div class="card">
      <a class="btn primary" data-name="OnlyFans" data-propagate="true" data-confirm="true"
         href="https://onlyfans.com/suburbanmoxxxie?utm_source=suburbanmoxxxiehome&utm_medium=button&utm_campaign=launch">ðŸ’™ OnlyFans â€” Subscribe</a>
      <a class="btn live" data-name="Chaturbate" data-propagate="true" data-confirm="true"
         href="https://chaturbate.com/suburbanmoxxxie?utm_source=suburbanmoxxxiehome&utm_medium=button&utm_campaign=launch">ðŸ”´ Iâ€™m Live on Chaturbate</a>
      <a class="btn" data-name="ManyVids" data-propagate="true" data-confirm="true"
         href="https://suburbanmoxxxie.manyvids.com?utm_source=suburbanmoxxxiehome&utm_medium=button&utm_campaign=launch">ðŸ›’ ManyVids â€” Clips</a>
    </div>

    <!-- Email -->
    <div class="card">
      <h2 style="margin:0 0 8px">Get updates</h2>
      <script async src="https://eocampaign1.com/form/9f8b5136-9f7a-11f0-8b6d-b31dd542261e.js" data-form="9f8b5136-9f7a-11f0-8b6d-b31dd542261e"></script>
    </div>

    <!-- Tier 2 -->
    <div class="card">
      <a class="btn" data-name="Pornhub" data-propagate="true" data-confirm="true"
         href="https://www.pornhub.com/model/suburban-moxxxie?utm_source=suburbanmoxxxiehome&utm_medium=button&utm_campaign=launch">ðŸ”’ Free Samples â€” Pornhub<span class="lock"> (explicit)</span></a>
      <a class="btn" data-name="RedGIFs" data-propagate="true" data-confirm="true"
         href="https://www.redgifs.com/users/suburbanmoxxxie?utm_source=suburbanmoxxxiehome&utm_medium=button&utm_campaign=launch">ðŸ”’ Loops â€” RedGIFs<span class="lock"> (explicit)</span></a>
      <a class="btn" data-name="Fancentro" data-propagate="true" data-confirm="true"
         href="https://fancentro.com/suburban-moxxxie?utm_source=suburbanmoxxxiehome&utm_medium=button&utm_campaign=launch">ðŸ”’ Fancentro<span class="lock"> (explicit)</span></a>
    </div>

    <!-- Footer -->
    <div class="footer">
      Â© Suburban Moxie â€¢ All rights reserved <br/>
      <a href="/safety">Report Safety Concern</a> | 
      <a href="/privacy">Privacy Policy</a> | 
      <a href="/terms">Terms of Use</a>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal-backdrop" id="modal-backdrop" aria-modal="true" role="dialog">
    <div class="modal" role="document">
      <h3 id="confirm-title">Sensitive content</h3>
      <p id="confirm-text">This link may lead to explicit 18+ material. Are you sure you want to continue?</p>
      <div class="row">
        <button class="xbtn secondary" id="confirm-cancel" type="button">Cancel</button>
        <button class="xbtn primary" id="confirm-go" type="button">Continue</button>
      </div>
    </div>
  </div>
</body>
</html>
